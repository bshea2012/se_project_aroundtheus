!function(){"use strict";const e=document.querySelector(".profile__add-button"),t=document.querySelector(".profile__edit-button"),s=(document.querySelector(".card__delete-button"),document.querySelector(".profile__avatar-edit-button")),i={profileName:".profile__title",profileDescription:".profile__description",profileAvatar:".profile__avatar"},n=".cards__list",r="#card-template",o="#preview-image-modal",a="#add-card-modal",l="#profile-edit-modal",h="#confirm-delete-modal",u="#avatar-edit-modal";class c{constructor(e,t,s,i,n){this._name=e.name,this._link=e.link,this._id=e._id,this._isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleCardDeleteClick=i,this._handleCardLike=n}_setEventListeners(){this._likeButton=this._cardElement.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>this._handleCardLike(this))),this._cardDelete=this._cardElement.querySelector(".card__delete-button"),this._cardDelete.addEventListener("click",(()=>this._handleCardDeleteClick(this))),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({link:this._link,name:this._name})}))}getCard(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.src=this._link,this._cardElement.querySelector(".card__description-content").textContent=this._name,this._cardImage.alt=this._name,this._setEventListeners(),this._updateLikeButton(),this._cardElement}removeCard(){this._cardElement.remove(),this._cardElement=null}isCardLiked(e){this._isLiked=e,this._updateLikeButton()}_updateLikeButton(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}handleCardLike(){this._likeButton.classList.toggle("card__like-button_active")}}class d{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}resetValidation(){this.toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}toggleButtonState(){this._hasInvalidInput(this._inputElements)?this.disableButton():this._enableButton()}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class _{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._element=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._element.prepend(e)}}class m{constructor(e){this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("click",this._handleRemoteClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("click",this._handleRemoteClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};_handleRemoteClose=e=>{e.target===e.currentTarget&&this.close()};setEventListeners(){this._closeButton=this._popupElement.querySelector(".modal__close"),this._closeButton.addEventListener("click",(()=>this.close()))}}class p extends m{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupElement.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent,this._handleFormSubmit=t,this._inputList=this._popupForm.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset()})),super.setEventListeners()}setButtonText(e){e?(this._submitButtonText="Saving...",console.log(this._submitButtonText)):(this._submitButtonText=this._submitButton.textContent,console.log(this._submitButtonText))}}class E{constructor(e){let{profileName:t,profileDescription:s,profileAvatar:i}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s),this._avatarElement=document.querySelector(i)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent,src:this._avatarElement.src}}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}setUserAvatar(e){this._avatarElement.src=e}}const v=new class extends m{constructor(e){super(e),this._popupImage=this._popupElement.querySelector(".card__image-preview"),this._popupCaption=this._popupElement.querySelector(".modal__heading-preview")}open(e){this._popupImage.src=e.link,this._popupImage.alt=e.name,this._popupCaption.textContent=e.name,super.open()}}(o),b=new p(a,(function(e){b.setButtonText(!0),L.addNewCard(e.title,e.link).then((e=>{B.addItem(x(e))})).catch((e=>{console.error("There is an Error: ",e)})).finally((()=>{b.setButtonText(!1)})),b.close()})),f=new p(l,(function(e){f.setButtonText(!0),L.editUserInfo(e.title,e.description).then((()=>{g.setUserInfo(e.title,e.description)})).catch((e=>{console.error("There is an Error: ",e)})).finally((()=>{f.setButtonText(!1)})),f.close()})),k=new p(u,(function(e){k.setButtonText(!0),L.updateAvatar(e.link).then((()=>{g.setUserAvatar(e.link)})).catch((e=>{console.error("Avatar not updated: ",e)})).finally((()=>{k.setButtonText(!1)})),k.close()})),C=new class extends m{constructor(e){super(e),this._closeConfirmForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupElement.querySelector(".modal__button-delete"),this._submitButtonText=this._submitButton.textContent}setConfirmDelete(e){this._handleFormSubmit=e}setDeleteText(e){e?(this._submitButtonText="Deleting...",console.log(this._submitButtonText)):(this._submitButtonText=this._submitButton.textContent,console.log(this._submitButtonText))}setEventListeners(){super.setEventListeners(),this._closeConfirmForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}}(h),L=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}editUserInfo(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}addNewCard(e,t){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}updateLike(e,t){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers}).then(this._checkResponse)}initialPageLoad(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"2f5abbfd-693d-4973-87a8-2e8fc711af51","Content-Type":"application/json"}});let B,g,S;function y(e,t){v.open(e,t)}function I(e){C.open(),C.setDeleteText(!0),C.setConfirmDelete((()=>{L.deleteCard(e._id).then((()=>{e.removeCard(),C.close()})).catch((e=>{console.error("There is an Error: ",e)})).finally((()=>{C.setDeleteText(!1)}))}))}function x(e){return new c(e,r,y,I,T).getCard()}function T(e){L.updateLike(e._id,e._isLiked).then((t=>{console.log(t.isLiked),e.isCardLiked(t.isLiked)})).catch((e=>{console.error("Card not liked: ",e)}))}v.setEventListeners(),b.setEventListeners(),f.setEventListeners(),k.setEventListeners(),C.setEventListeners(),L.initialPageLoad().then((e=>{let[t,s]=e;B=new _({items:s,renderer:e=>{B.addItem(x(e))}},n),B.renderItems(),g=new E(i),g.setUserInfo(t.name,t.about),g.setUserAvatar(t.avatar)})).catch((e=>{console.error("There is an Error: ",e)})),e.addEventListener("click",(()=>{q["place-form"].toggleButtonState(),b.open()})),t.addEventListener("click",(()=>{S=g.getUserInfo(),f.setInputValues({title:S.name,description:S.job}),q["profile-form"].resetValidation(),f.open()})),s.addEventListener("click",(()=>{S=g.getUserInfo(),k.setInputValues({link:S.src}),q["avatar-form"].toggleButtonState(),k.open()}));const q={};var U;U={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(".modal__form")).forEach((e=>{const t=new d(U,e),s=e.getAttribute("name");q[s]=t,t.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxjQUFlLGdCQUNmRSxxQkFBc0IsaUJBQ3RCRSxvQkFBcUIseUJBQ3JCRSxnQkFBaUIsMEJBQ2pCRSxXQUFZLHdCT3lKS21JLE1BQU1DLEtBQUsvTCxTQUFTZ0YsaUJBQWlCLGlCQUU3Q2hCLFNBQVNmLElBQ2hCLE1BQU0rSSxFQUFZLElBQUlqSixFQUFjOEksRUFBb0I1SSxHQUVsRGdKLEVBQVdoSixFQUFZaUosYUFBYSxRQUcxQ04sRUFBZUssR0FBWUQsRUFDM0JBLEVBQVU5RyxrQkFBa0IsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoUGljdHVyZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtRGVsZXRlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBjYXJkRGVsZXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2F2YXRhci1lZGl0LWJ1dHRvblwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVNlbGVjdG9ycyA9IHtcclxuICBwcm9maWxlTmFtZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBwcm9maWxlRGVzY3JpcHRpb246IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbiAgcHJvZmlsZUF2YXRhcjogXCIucHJvZmlsZV9fYXZhdGFyXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGNhcmRTZWN0aW9uOiBcIi5jYXJkc19fbGlzdFwiLFxyXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gIHByZXZpZXdNb2RhbDogXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiLFxyXG4gIG5ld0NhcmRNb2RhbDogXCIjYWRkLWNhcmQtbW9kYWxcIixcclxuICBlZGl0UHJvZmlsZU1vZGFsOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBjb25maXJtRGVsZXRlTW9kYWw6IFwiI2NvbmZpcm0tZGVsZXRlLW1vZGFsXCIsXHJcbiAgZWRpdEF2YXRhck1vZGFsOiBcIiNhdmF0YXItZWRpdC1tb2RhbFwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZUNhcmREZWxldGVDbGljayxcclxuICAgIGhhbmRsZUNhcmRMaWtlXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gZGF0YS5pc0xpa2VkO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlQ2xpY2sgPSBoYW5kbGVDYXJkRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gQ2FyZCBMaWtlIEJ1dHRvblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSh0aGlzKVxyXG4gICAgKTtcclxuICAgIC8vIENhcmQgRGVsZXRlIEJ1dHRvblxyXG4gICAgdGhpcy5fY2FyZERlbGV0ZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmREZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGVDbGljayh0aGlzKVxyXG4gICAgKTtcclxuICAgIC8vIENhcmQgUHJldmlld1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkKCkge1xyXG4gICAgLy8gQ3JlYXRlIGZyb20gVGVtcGxhdGVcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICAvL2dldCB0aGUgY2FyZCB2aWV3XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2Rlc2NyaXB0aW9uLWNvbnRlbnRcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICAvL3NldCBldmVudCBsaXN0ZW5lcnNcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fdXBkYXRlTGlrZUJ1dHRvbigpO1xyXG5cclxuICAgIC8vcmV0dXJuIHRoZSBjYXJkXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBpc0NhcmRMaWtlZChpc0xpa2VkKSB7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuX3VwZGF0ZUxpa2VCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIF91cGRhdGVMaWtlQnV0dG9uKCkge1xyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlQ2FyZExpa2UoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVsZW1lbnRzKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1zZ0VsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNc2dFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNc2dFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1zZ0VsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNc2dFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTXNnRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZVJlbW90ZUNsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZVJlbW90ZUNsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVSZW1vdGVDbG9zZSA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAvLyBDcmVhdGUgYW4gZW1wdHkgb2JqZWN0XHJcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XHJcblxyXG4gICAgLy8gQWRkIHRoZSB2YWx1ZXMgb2YgdGhlIGZpZWxkcyB0byB0aGlzIG9iamVjdFxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJldHVybiB0aGUgdmFsdWVzIG9iamVjdFxyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgLy8gSGVyZSB5b3UgaW5zZXJ0IHRoZSBgdmFsdWVgIGJ5IHRoZSBgbmFtZWAgb2YgdGhlIGlucHV0XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgc2V0QnV0dG9uVGV4dChpc1NhdmluZykge1xyXG4gICAgaWYgKGlzU2F2aW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLl9zdWJtaXRCdXR0b25UZXh0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uLCBwcm9maWxlQXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZSk7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlRGVzY3JpcHRpb24pO1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUF2YXRhcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIHNyYzogdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgam9iKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcihzcmMpIHtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gc3JjO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuLy8gSW1wb3J0IGFsbCBjbGFzc2VzXHJcbmltcG9ydCB7XHJcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcclxuICBlZGl0UHJvZmlsZUJ1dHRvbixcclxuICBlZGl0QXZhdGFyQnV0dG9uLFxyXG4gIHNlbGVjdG9ycyxcclxuICBwcm9maWxlU2VsZWN0b3JzLFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxufSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmRcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvclwiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhQaWN0dXJlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aFBpY3R1cmVcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIjtcclxuaW1wb3J0IFBvcHVwQ29uZmlybURlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm1EZWxldGVcIjtcclxuXHJcbi8vIENyZWF0ZSBpbnN0YW5jZXMgb2YgQ2xhc3Nlc1xyXG5jb25zdCBpbWFnZVByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhQaWN0dXJlKHNlbGVjdG9ycy5wcmV2aWV3TW9kYWwpO1xyXG5cclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgc2VsZWN0b3JzLm5ld0NhcmRNb2RhbCxcclxuICBoYW5kbGVBZGRDYXJkU3VibWl0XHJcbik7XHJcblxyXG5jb25zdCBlZGl0VXNlckluZm9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHNlbGVjdG9ycy5lZGl0UHJvZmlsZU1vZGFsLFxyXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XHJcbik7XHJcblxyXG5jb25zdCBlZGl0QXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBzZWxlY3RvcnMuZWRpdEF2YXRhck1vZGFsLFxyXG4gIGhhbmRsZUF2YXRhckVkaXRTdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cENvbmZpcm1EZWxldGUoc2VsZWN0b3JzLmNvbmZpcm1EZWxldGVNb2RhbCk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIyZjVhYmJmZC02OTNkLTQ5NzMtODdhOC0yZThmYzcxMWFmNTFcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy9Jbml0aWFsaXplIGFsbCBpbnN0YW5jZXNcclxuaW1hZ2VQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRVc2VySW5mb1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRBdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5kZWxldGVDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmxldCBjYXJkU2VjdGlvbjtcclxubGV0IHVzZXJJbmZvO1xyXG5cclxuYXBpXHJcbiAgLmluaXRpYWxQYWdlTG9hZCgpXHJcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XHJcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGNhcmRzLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBzZWxlY3RvcnMuY2FyZFNlY3Rpb25cclxuICAgICk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuICAgIHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVTZWxlY3RvcnMpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYFRoZXJlIGlzIGFuIEVycm9yOiBgLCBlcnIpOyAvLyBsb2cgdGhlIGVycm9yIHRvIHRoZSBjb25zb2xlXHJcbiAgfSk7XHJcblxyXG4vL1NwZWNpZmljIEV2ZW50IExpc3RlbmVyc1xyXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJwbGFjZS1mb3JtXCJdLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5sZXQgdXNlckRhdGE7XHJcblxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBlZGl0VXNlckluZm9Qb3B1cC5zZXRJbnB1dFZhbHVlcyh7XHJcbiAgICB0aXRsZTogdXNlckRhdGEubmFtZSxcclxuICAgIGRlc2NyaXB0aW9uOiB1c2VyRGF0YS5qb2IsXHJcbiAgfSk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdFVzZXJJbmZvUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmVkaXRBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgZWRpdEF2YXRhclBvcHVwLnNldElucHV0VmFsdWVzKHtcclxuICAgIGxpbms6IHVzZXJEYXRhLnNyYyxcclxuICB9KTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImF2YXRhci1mb3JtXCJdLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyBGdW5jdGlvbnNcclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhsaW5rLCBuYW1lKSB7XHJcbiAgaW1hZ2VQcmV2aWV3UG9wdXAub3BlbihsaW5rLCBuYW1lKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChjYXJkRGF0YSkge1xyXG4gIG5ld0NhcmRQb3B1cC5zZXRCdXR0b25UZXh0KHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmFkZE5ld0NhcmQoY2FyZERhdGEudGl0bGUsIGNhcmREYXRhLmxpbmspXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFRoZXJlIGlzIGFuIEVycm9yOiBgLCBlcnIpOyAvLyBsb2cgdGhlIGVycm9yIHRvIHRoZSBjb25zb2xlXHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBuZXdDYXJkUG9wdXAuc2V0QnV0dG9uVGV4dChmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGNhcmREYXRhKSB7XHJcbiAgZWRpdFVzZXJJbmZvUG9wdXAuc2V0QnV0dG9uVGV4dCh0cnVlKTtcclxuICBhcGlcclxuICAgIC5lZGl0VXNlckluZm8oY2FyZERhdGEudGl0bGUsIGNhcmREYXRhLmRlc2NyaXB0aW9uKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhjYXJkRGF0YS50aXRsZSwgY2FyZERhdGEuZGVzY3JpcHRpb24pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFRoZXJlIGlzIGFuIEVycm9yOiBgLCBlcnIpOyAvLyBsb2cgdGhlIGVycm9yIHRvIHRoZSBjb25zb2xlXHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBlZGl0VXNlckluZm9Qb3B1cC5zZXRCdXR0b25UZXh0KGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIGVkaXRVc2VySW5mb1BvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmREZWxldGVDbGljayhjYXJkKSB7XHJcbiAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcclxuICBkZWxldGVDYXJkUG9wdXAuc2V0RGVsZXRlVGV4dCh0cnVlKTtcclxuICBkZWxldGVDYXJkUG9wdXAuc2V0Q29uZmlybURlbGV0ZSgoKSA9PiB7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZC5faWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLnJlbW92ZUNhcmQoKTtcclxuICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBUaGVyZSBpcyBhbiBFcnJvcjogYCwgZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldERlbGV0ZVRleHQoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyRWRpdFN1Ym1pdChkYXRhKSB7XHJcbiAgZWRpdEF2YXRhclBvcHVwLnNldEJ1dHRvblRleHQodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlQXZhdGFyKGRhdGEubGluaylcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihkYXRhLmxpbmspO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEF2YXRhciBub3QgdXBkYXRlZDogYCwgZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZWRpdEF2YXRhclBvcHVwLnNldEJ1dHRvblRleHQoZmFsc2UpO1xyXG4gICAgfSk7XHJcblxyXG4gIGVkaXRBdmF0YXJQb3B1cC5jbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmREYXRhLFxyXG4gICAgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSxcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVDYXJkRGVsZXRlQ2xpY2ssXHJcbiAgICBoYW5kbGVDYXJkTGlrZVxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldENhcmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZExpa2UoZGF0YSkge1xyXG4gIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZUxpa2UoZGF0YS5faWQsIGRhdGEuX2lzTGlrZWQpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcy5pc0xpa2VkKTtcclxuICAgICAgZGF0YS5pc0NhcmRMaWtlZChyZXMuaXNMaWtlZCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihgQ2FyZCBub3QgbGlrZWQ6IGAsIGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcclxuICAgIH0pO1xyXG59XHJcblxyXG4vL1xyXG5cclxuLy8gVmFsaWRhdGlvblxyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uU2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybVwiKSk7XHJcblxyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGZvcm1FbGVtZW50KTtcclxuICAgIC8vIEhlcmUgeW91IGdldCB0aGUgbmFtZSBvZiB0aGUgZm9ybSAoaWYgeW91IGRvbuKAmXQgaGF2ZSBpdCB0aGVuIHlvdSBuZWVkIHRvIGFkZCBpdCBpbnRvIGVhY2ggZm9ybSBpbiBgaW5kZXguaHRtbGAgZmlyc3QpXHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcblxyXG4gICAgLy8gSGVyZSB5b3Ugc3RvcmUgdGhlIHZhbGlkYXRvciB1c2luZyB0aGUgYG5hbWVgIG9mIHRoZSBmb3JtXHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uU2V0dGluZ3MpO1xyXG5cclxuLy9cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhQaWN0dXJlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlLXByZXZpZXdcIik7XHJcbiAgICB0aGlzLl9wb3B1cENhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2hlYWRpbmctcHJldmlld1wiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwQ29uZmlybURlbGV0ZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQ29uZmlybUZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fYnV0dG9uLWRlbGV0ZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIHNldENvbmZpcm1EZWxldGUoZnVuYykge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGZ1bmM7XHJcbiAgfVxyXG5cclxuICBzZXREZWxldGVUZXh0KGlzRGVsZXRpbmcpIHtcclxuICAgIGlmIChpc0RlbGV0aW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSBcIkRlbGV0aW5nLi4uXCI7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICAgICAgY29uc29sZS5sb2codGhpcy5fc3VibWl0QnV0dG9uVGV4dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9jbG9zZUNvbmZpcm1Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGVkaXRVc2VySW5mbyh0aXRsZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiB0aXRsZSxcclxuICAgICAgICBhYm91dDogZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZE5ld0NhcmQobmFtZSwgbGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVBdmF0YXIobGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpa2UoaWQsIGlzTGlrZWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbFBhZ2VMb2FkKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImFkZE5ld0NhcmRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImVkaXRBdmF0YXJCdXR0b24iLCJwcm9maWxlU2VsZWN0b3JzIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlQXZhdGFyIiwic2VsZWN0b3JzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVDYXJkRGVsZXRlQ2xpY2siLCJoYW5kbGVDYXJkTGlrZSIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfaXNMaWtlZCIsImlzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlQ2FyZERlbGV0ZUNsaWNrIiwiX2hhbmRsZUNhcmRMaWtlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmREZWxldGUiLCJfY2FyZEltYWdlIiwiZ2V0Q2FyZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzcmMiLCJ0ZXh0Q29udGVudCIsImFsdCIsIl91cGRhdGVMaWtlQnV0dG9uIiwicmVtb3ZlQ2FyZCIsInJlbW92ZSIsImlzQ2FyZExpa2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwidG9nZ2xlIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJyZXNldFZhbGlkYXRpb24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9pbnB1dEVsZW1lbnRzIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9oaWRlSW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1zZ0VsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwicXVlcnlTZWxlY3RvckFsbCIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwiX3JlZiIsInNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9lbGVtZW50IiwicmVuZGVySXRlbXMiLCJhZGRJdGVtIiwiaXRlbSIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVSZW1vdGVDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJzZXRFdmVudExpc3RlbmVycyIsIl9jbG9zZUJ1dHRvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwicmVzZXQiLCJzZXRCdXR0b25UZXh0IiwiaXNTYXZpbmciLCJjb25zb2xlIiwibG9nIiwiVXNlckluZm8iLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJpbWFnZVByZXZpZXdQb3B1cCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwQ2FwdGlvbiIsIm5ld0NhcmRQb3B1cCIsImNhcmREYXRhIiwiYXBpIiwiYWRkTmV3Q2FyZCIsInRpdGxlIiwidGhlbiIsImNhcmRTZWN0aW9uIiwiY3JlYXRlQ2FyZCIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJmaW5hbGx5IiwiZWRpdFVzZXJJbmZvUG9wdXAiLCJlZGl0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsInVzZXJJbmZvIiwiZWRpdEF2YXRhclBvcHVwIiwidXBkYXRlQXZhdGFyIiwiZGVsZXRlQ2FyZFBvcHVwIiwiX2Nsb3NlQ29uZmlybUZvcm0iLCJzZXRDb25maXJtRGVsZXRlIiwiZnVuYyIsInNldERlbGV0ZVRleHQiLCJpc0RlbGV0aW5nIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiZGVsZXRlQ2FyZCIsImF2YXRhciIsInVwZGF0ZUxpa2UiLCJpbml0aWFsUGFnZUxvYWQiLCJhbGwiLCJhdXRob3JpemF0aW9uIiwidXNlckRhdGEiLCJjYXJkIiwiY2FyZHMiLCJmb3JtVmFsaWRhdG9ycyIsInZhbGlkYXRpb25TZXR0aW5ncyIsIkFycmF5IiwiZnJvbSIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==